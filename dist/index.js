function g(e){return e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0?!0:typeof e=="object"&&Object.keys(e).length===0}function l(e,t){let s=t;for(let r of e.split("."))if(r in s)s=s[r];else return;return s}function w(e){let t=e.match(/^.*?\.(.*?)\..*?$/);return t&&t.length>1?t[1]:null}function A(e,t){return t.some(s=>s.path===e)}function z(e){return e.split(/[_]|(?=[A-Z])/).filter(r=>r!==null&&r!=="")}function F(e){return e=e.split(".").slice(-1)[0],e=z(e),e=e.map(t=>t.toLowerCase()),e=e.filter(t=>t!=="id"),e=e.join(" "),e}function j(e,t){return/^.*\.\d+\..*$/.test(e)&&!t[e]&&(e=e.replace(/\.\d+\./,".*.")),t[e]}function x(e,t){for(let[s,r]of Object.entries(t))t[s]={value:r,writable:!0,enumerable:!0};Object.defineProperties(e,t)}function _(e){let t={};return e.forEach(({path:s,value:r})=>{let o=s.split("."),n=t;for(let a=0;a<o.length;a++){let i=o[a];if(a===o.length-1)if(i.match(/^\d+$/)){Array.isArray(n)||(n=[]);let b=parseInt(i);n[b]={...n[b],product_id:r}}else n[i]=r===void 0?null:r;else n[i]||(n[i]=o[a+1].match(/^\d+$/)?[]:{}),n=n[i]}}),t}var V={empty:g,getValue:l,getValueBetweenDots:w,isPathInItems:A,splitStringByCase:z,convertToReadableFieldNames:F,getCustomAttribute:j,transformData:_},I=V;var N={required({value:e}){return{pass:!g(e)}},required_if({value:e,data:t,args:s}){if(!g(e))return{pass:!0};let r=s.split(","),o=r[0],n=r[1];return{pass:l(o,t)!==n}},required_unless({value:e,data:t,args:s}){let r=s.split(","),o=r[0],n=r[1];return l(o,t)===n?{pass:!0}:{pass:!g(e)}},numeric({value:e}){return{pass:/^[+-]?([0-9]*[.])?[0-9]+$/.test(e)}},min({value:e,args:t}){let s=t;return typeof e=="string"?{pass:this.numeric({value:e,data:{}}).pass?e>=s:e.length>=s}:typeof e=="number"?{pass:e>=s}:Array.isArray(e)?{pass:e.length>=s}:{pass:!1}},max({value:e,args:t}){let s=t;return typeof e=="string"?{pass:this.numeric({value:e,data:{}}).pass?e<=s:e.length<=s}:typeof e=="number"?{pass:e<=s}:Array.isArray(e)?{pass:e.length<=s}:{pass:!1}},alpha({value:e}){return typeof e!="string"?{pass:!1}:{pass:/^[a-zA-Z]+$/.test(e)}},alpha_num({value:e}){return typeof e!="string"?{pass:!1}:{pass:/^[a-zA-Z0-9]+$/.test(e)}},in({value:e,args:t}){return{pass:t.split(",").indexOf(`${e}`)!==-1}},not_in({value:e,args:t}){return{pass:t.split(",").indexOf(`${e}`)===-1}},email({value:e}){return{pass:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i.test(e)}},url({value:e}){return{pass:/https?:\/\/(www\.)?([-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}|localhost)\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i.test(e)}},same({value:e,data:t,args:s}){return{pass:l(s,t)===e}},different({value:e,data:t,args:s}){return{pass:l(s,t)!==e}},starts_with({value:e,args:t}){for(let s of t.split(","))if(e.startsWith(s))return{pass:!0};return{pass:!1}},ends_with({value:e,args:t}){for(let s of t.split(","))if(e.endsWith(s))return{pass:!0};return{pass:!1}},boolean({value:e}){switch(typeof e){case"boolean":return{pass:!0};case"number":return{pass:[0,1].includes(e)};case"string":return{pass:["0","1"].includes(e)};default:return{pass:!1}}}},m=N;var S={convertToReadableFieldNames:!0,convertToReadableFieldNamesFunction:F,ruleSeparator:"|",parseNumeric:!0},y=S;var Z={invalid({attribute:e}){return`The ${e} field is invalid.`},required({attribute:e}){return`The ${e} field is required.`},required_if({attribute:e}){return`The ${e} field is required.`},required_unless({attribute:e}){return`The ${e} field is required.`},numeric({attribute:e}){return`The ${e} field must be a number.`},min({attribute:e,value:t,args:s}){return m.numeric({value:t,data:{}}).pass?`The ${e} field must be at least ${s}.`:Array.isArray(t)?`The ${e} field must have at least ${s} items.`:`The ${e} field must be at least ${s} characters.`},max({attribute:e,value:t,args:s}){return m.numeric({value:t,data:{}}).pass?`The ${e} field must not be greater than ${s}.`:Array.isArray(t)?`The ${e} field must not have more than ${s} items.`:`The ${e} field must not be greater than ${s} characters.`},alpha({attribute:e}){return`The ${e} field must only contain letters.`},alpha_num({attribute:e}){return`The ${e} field must only contain letters and numbers.`},in({attribute:e}){return`The selected ${e} is invalid.`},not_in({attribute:e}){return`The selected ${e} is invalid.`},email({attribute:e}){return`The ${e} field must be a valid email address.`},url({attribute:e}){return`The ${e} field must be a valid URL.`},same({attribute:e,args:t}){return`The ${e} and ${t} must match.`},different({attribute:e,args:t}){return`The ${e} and ${t} must be different.`},starts_with({attribute:e,args:t}){let s=t;return`The ${e} must start with ${s.includes(",")?`one of the following: ${s.split(",").join(", ")}`:s}.`},ends_with({attribute:e,args:t}){let s=t;return`The ${e} must end with ${s.includes(",")?`one of the following: ${s.split(",").join(", ")}`:s}.`},boolean({attribute:e}){return`The ${e} field must be true or false.`}},c=Z;var v={email:"email address"},k=v;var C=e=>{x(y,e)},P=e=>{x(m,e)},D=e=>{x(c,e)},M=e=>{x(k,e)},q=m;async function O(e,t){let s=[];for(let[n,a]of Object.entries(e)){let i="";switch(i=n.includes(".")?/\..*\./.test(n)?"arrayOfObject":"object":"string",i){case"string":s.push({path:n,value:t[n],rules:a});break;case"object":s.push({path:n,value:l(n,t),rules:a});break;case"arrayOfObject":if(w(n)!=="*")s.push({path:n,value:l(n,t),rules:a});else{let p=n.split("."),h=p[0],u=p[2],R=h in t&&t[h].length?t[h]:[{}];for(let[d,f]of Object.entries(R)){let T=f,$=`${h}.${d}.${u}`;A($,s)||s.push({path:$,value:T[u],rules:a.replace(".*.",`.${d}.`)})}}break}}let r={};for(let[n,a]of Object.entries(s)){let{path:i,rules:b,value:p}=a;for(let h of b.split(y.ruleSeparator)){let[u,R]=h.split(":");if(!(i in r)&&u in q){y.parseNumeric&&u==="numeric"&&!Number.isNaN(parseFloat(p))&&(s.at(n).value=parseFloat(p));let d={pass:!1};if(!u.startsWith("required")&&g(p)?d={pass:!0}:d=await q[u]({data:t,value:p,args:R}),!d.pass){let f=c.invalid,T=`${i}.${u}`,$=`${i.replace(/\.\d+\./,".*.")}.${u}`;T in c?f=c[T]:$ in c?f=c[$]:u in c&&(f=c[u]),r[i]=typeof f=="string"?f:await f({attribute:j(i,k)||(y.convertToReadableFieldNames?y.convertToReadableFieldNamesFunction(i):i),value:p,args:R,data:t,extra:d.extra})}}}}return{pass:Object.keys(r).length===0,errors:r,data:_(s)}}var L={validate:O,setConfig:C,setRule:P,setMessage:D,setAttribute:M,rules:m,utils:I},ae=L;export{ae as default};

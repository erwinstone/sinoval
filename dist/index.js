function c(e){return e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0?!0:typeof e=="object"&&Object.keys(e).length===0}function u(e,t){let r=t;for(let s of e.split("."))if(s in r)r=r[s];else return;return r}function T(e){let t=e.match(/^.*?\.(.*?)\..*?$/);return t&&t.length>1?t[1]:null}function w(e,t){return t.some(r=>r.path===e)}function k(e){return e.split(/[_]|(?=[A-Z])/).filter(s=>s!==null&&s!=="")}function A(e){return e=e.split(".").slice(-1)[0],e=k(e),e=e.map(t=>t.toLowerCase()),e=e.filter(t=>t!=="id"),e=e.join(" "),e}function j(e,t){return/^.*\.\d+\..*$/.test(e)&&!t[e]&&(e=e.replace(/\.\d+\./,".*.")),t[e]}function p(e,t){for(let[r,s]of Object.entries(t))t[r]={value:s,writable:!0,enumerable:!0};Object.defineProperties(e,t)}var V={empty:c,getValue:u,getValueBetweenDots:T,isPathInItems:w,splitStringByCase:k,convertToReadableFieldNames:A,getCustomAttribute:j},z=V;var D={required({value:e}){return!c(e)},required_if({value:e,data:t,args:r}){if(!c(e))return!0;let s=r.split(","),h=s[0],n=s[1];return u(h,t)!==n},required_unless({value:e,data:t,args:r}){let s=r.split(","),h=s[0],n=s[1];return u(h,t)===n?!0:!c(e)},numeric({value:e}){return/^[+-]?([0-9]*[.])?[0-9]+$/.test(e)},min({value:e,args:t}){let r=t;return typeof e=="string"?this.numeric({value:e,data:{}})?e>=r:e.length>=r:typeof e=="number"?e>=r:Array.isArray(e)?e.length>=r:!1},max({value:e,args:t}){let r=t;return typeof e=="string"?this.numeric({value:e,data:{}})?e<=r:e.length<=r:typeof e=="number"?e<=r:Array.isArray(e)?e.length<=r:!1},alpha({value:e}){return typeof e!="string"?!1:/^[a-zA-Z]+$/.test(e)},alpha_num({value:e}){return typeof e!="string"?!1:/^[a-zA-Z0-9]+$/.test(e)},in({value:e,args:t}){return t.split(",").indexOf(`${e}`)!==-1},not_in({value:e,args:t}){return t.split(",").indexOf(`${e}`)===-1},email({value:e}){return/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i.test(e)},url({value:e}){return/https?:\/\/(www\.)?([-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}|localhost)\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i.test(e)},same({value:e,data:t,args:r}){return u(r,t)===e},different({value:e,data:t,args:r}){return u(r,t)!==e},starts_with({value:e,args:t}){for(let r of t.split(","))if(e.startsWith(r))return!0;return!1},ends_with({value:e,args:t}){for(let r of t.split(","))if(e.endsWith(r))return!0;return!1},boolean({value:e}){switch(typeof e){case"boolean":return!0;case"number":return[0,1].includes(e);case"string":return["0","1"].includes(e);default:return!1}}},f=D;var v={convertToReadableFieldNames:!0,convertToReadableFieldNamesFunction:A,ruleSeparator:"|"},g=v;var Z={invalid({attribute:e}){return`The ${e} field is invalid.`},required({attribute:e}){return`The ${e} field is required.`},required_if({attribute:e}){return`The ${e} field is required.`},required_unless({attribute:e}){return`The ${e} field is required.`},numeric({attribute:e}){return`The ${e} field must be a number.`},min({attribute:e,value:t,args:r}){return f.numeric({value:t,data:{}})?`The ${e} field must be at least ${r}.`:Array.isArray(t)?`The ${e} field must have at least ${r} items.`:`The ${e} field must be at least ${r} characters.`},max({attribute:e,value:t,args:r}){return f.numeric({value:t,data:{}})?`The ${e} field must not be greater than ${r}.`:Array.isArray(t)?`The ${e} field must not have more than ${r} items.`:`The ${e} field must not be greater than ${r} characters.`},alpha({attribute:e}){return`The ${e} field must only contain letters.`},alpha_num({attribute:e}){return`The ${e} field must only contain letters and numbers.`},in({attribute:e}){return`The selected ${e} is invalid.`},not_in({attribute:e}){return`The selected ${e} is invalid.`},email({attribute:e}){return`The ${e} field must be a valid email address.`},url({attribute:e}){return`The ${e} field must be a valid URL.`},same({attribute:e,args:t}){return`The ${e} and ${t} must match.`},different({attribute:e,args:t}){return`The ${e} and ${t} must be different.`},starts_with({attribute:e,args:t}){let r=t;return`The ${e} must start with ${r.includes(",")?`one of the following: ${r.split(",").join(", ")}`:r}.`},ends_with({attribute:e,args:t}){let r=t;return`The ${e} must end with ${r.includes(",")?`one of the following: ${r.split(",").join(", ")}`:r}.`},boolean({attribute:e}){return`The ${e} field must be true or false.`}},l=Z;var L={email:"email address"},F=L;var C=e=>{p(g,e)},P=e=>{p(f,e)},I=e=>{p(l,e)},M=e=>{p(F,e)},q=f;async function O(e,t){let r=[];for(let[n,i]of Object.entries(e)){let y="";switch(y=n.includes(".")?/\..*\./.test(n)?"arrayOfObject":"object":"string",y){case"string":r.push({path:n,value:t[n],rules:i});break;case"object":r.push({path:n,value:u(n,t),rules:i});break;case"arrayOfObject":if(T(n)!=="*")r.push({path:n,value:u(n,t),rules:i});else{let b=n.split("."),o=b[0],m=b[2],d=o in t&&t[o].length?t[o]:[{}];for(let[a,x]of Object.entries(d)){let R=x,_=`${o}.${a}.${m}`;w(_,r)||r.push({path:_,value:R[m],rules:i.replace(".*.",`.${a}.`)})}}break}}let s={};for(let n of r){let{path:i,rules:y,value:$}=n;for(let b of y.split(g.ruleSeparator)){let[o,m]=b.split(":");if(!(i in s)&&o in q){let d=!1;if(!o.startsWith("required")&&c($)?d=!0:d=await q[o]({data:t,value:$,args:m}),!d){let a=l.invalid,x=`${i}.${o}`,R=`${i.replace(/\.\d+\./,".*.")}.${o}`;x in l?a=l[x]:R in l?a=l[R]:o in l&&(a=l[o]),s[i]=typeof a=="string"?a:await a({attribute:j(i,F)||(g.convertToReadableFieldNames?g.convertToReadableFieldNamesFunction(i):i),value:$,args:m,data:t})}}}}return{pass:Object.keys(s).length===0,errors:s,data:t}}var B={validate:O,setConfig:C,setRule:P,setMessage:I,setAttribute:M,rules:f,utils:z},ie=B;export{ie as default};

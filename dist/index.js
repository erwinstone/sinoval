function d(e){return e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0?!0:typeof e=="object"&&Object.keys(e).length===0}function c(e,t){let s=t;for(let r of e.split("."))if(r in s)s=s[r];else return;return s}function T(e){let t=e.match(/^.*?\.(.*?)\..*?$/);return t&&t.length>1?t[1]:null}function w(e,t){return t.some(s=>s.path===e)}function z(e){return e.split(/[_]|(?=[A-Z])/).filter(r=>r!==null&&r!=="")}function A(e){return e=e.split(".").slice(-1)[0],e=z(e),e=e.map(t=>t.toLowerCase()),e=e.filter(t=>t!=="id"),e=e.join(" "),e}function _(e,t){return/^.*\.\d+\..*$/.test(e)&&!t[e]&&(e=e.replace(/\.\d+\./,".*.")),t[e]}function y(e,t){for(let[s,r]of Object.entries(t))t[s]={value:r,writable:!0,enumerable:!0};Object.defineProperties(e,t)}function j(e){let t={};return e.forEach(({path:s,value:r})=>{let o=s.split("."),n=t;for(let i=0;i<o.length;i++){let u=o[i];if(i===o.length-1)if(u.match(/^\d+$/)){Array.isArray(n)||(n=[]);let m=parseInt(u);n[m]={...n[m],product_id:r}}else n[u]=r===void 0?null:r;else n[u]||(n[u]=o[i+1].match(/^\d+$/)?[]:{}),n=n[u]}}),t}var V={empty:d,getValue:c,getValueBetweenDots:T,isPathInItems:w,splitStringByCase:z,convertToReadableFieldNames:A,getCustomAttribute:_,transformData:j},I=V;var S={required({value:e}){return{pass:!d(e)}},required_if({value:e,data:t,args:s}){if(!d(e))return{pass:!0};let r=s.split(","),o=r[0],n=r[1];return{pass:c(o,t)!==n}},required_unless({value:e,data:t,args:s}){let r=s.split(","),o=r[0],n=r[1];return c(o,t)===n?{pass:!0}:{pass:!d(e)}},numeric({value:e}){return{pass:/^[+-]?([0-9]*[.])?[0-9]+$/.test(e)}},min({value:e,args:t}){let s=t;return typeof e=="string"?{pass:this.numeric({value:e,data:{}}).pass?e>=s:e.length>=s}:typeof e=="number"?{pass:e>=s}:Array.isArray(e)?{pass:e.length>=s}:{pass:!1}},max({value:e,args:t}){let s=t;return typeof e=="string"?{pass:this.numeric({value:e,data:{}}).pass?e<=s:e.length<=s}:typeof e=="number"?{pass:e<=s}:Array.isArray(e)?{pass:e.length<=s}:{pass:!1}},alpha({value:e}){return typeof e!="string"?{pass:!1}:{pass:/^[a-zA-Z]+$/.test(e)}},alpha_num({value:e}){return typeof e!="string"?{pass:!1}:{pass:/^[a-zA-Z0-9]+$/.test(e)}},in({value:e,args:t}){return{pass:t.split(",").indexOf(`${e}`)!==-1}},not_in({value:e,args:t}){return{pass:t.split(",").indexOf(`${e}`)===-1}},email({value:e}){return{pass:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i.test(e)}},url({value:e}){return{pass:/https?:\/\/(www\.)?([-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}|localhost)\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i.test(e)}},same({value:e,data:t,args:s}){return{pass:c(s,t)===e}},different({value:e,data:t,args:s}){return{pass:c(s,t)!==e}},starts_with({value:e,args:t}){for(let s of t.split(","))if(e.startsWith(s))return{pass:!0};return{pass:!1}},ends_with({value:e,args:t}){for(let s of t.split(","))if(e.endsWith(s))return{pass:!0};return{pass:!1}},boolean({value:e}){switch(typeof e){case"boolean":return{pass:!0};case"number":return{pass:[0,1].includes(e)};case"string":return{pass:["0","1"].includes(e)};default:return{pass:!1}}}},p=S;var Z={convertToReadableFieldNames:!0,convertToReadableFieldNamesFunction:A,ruleSeparator:"|"},$=Z;var L={invalid({attribute:e}){return`The ${e} field is invalid.`},required({attribute:e}){return`The ${e} field is required.`},required_if({attribute:e}){return`The ${e} field is required.`},required_unless({attribute:e}){return`The ${e} field is required.`},numeric({attribute:e}){return`The ${e} field must be a number.`},min({attribute:e,value:t,args:s}){return p.numeric({value:t,data:{}}).pass?`The ${e} field must be at least ${s}.`:Array.isArray(t)?`The ${e} field must have at least ${s} items.`:`The ${e} field must be at least ${s} characters.`},max({attribute:e,value:t,args:s}){return p.numeric({value:t,data:{}}).pass?`The ${e} field must not be greater than ${s}.`:Array.isArray(t)?`The ${e} field must not have more than ${s} items.`:`The ${e} field must not be greater than ${s} characters.`},alpha({attribute:e}){return`The ${e} field must only contain letters.`},alpha_num({attribute:e}){return`The ${e} field must only contain letters and numbers.`},in({attribute:e}){return`The selected ${e} is invalid.`},not_in({attribute:e}){return`The selected ${e} is invalid.`},email({attribute:e}){return`The ${e} field must be a valid email address.`},url({attribute:e}){return`The ${e} field must be a valid URL.`},same({attribute:e,args:t}){return`The ${e} and ${t} must match.`},different({attribute:e,args:t}){return`The ${e} and ${t} must be different.`},starts_with({attribute:e,args:t}){let s=t;return`The ${e} must start with ${s.includes(",")?`one of the following: ${s.split(",").join(", ")}`:s}.`},ends_with({attribute:e,args:t}){let s=t;return`The ${e} must end with ${s.includes(",")?`one of the following: ${s.split(",").join(", ")}`:s}.`},boolean({attribute:e}){return`The ${e} field must be true or false.`}},f=L;var v={email:"email address"},F=v;var C=e=>{y($,e)},P=e=>{y(p,e)},D=e=>{y(f,e)},M=e=>{y(F,e)},q=p;async function k(e,t){let s=[];for(let[n,i]of Object.entries(e)){let u="";switch(u=n.includes(".")?/\..*\./.test(n)?"arrayOfObject":"object":"string",u){case"string":s.push({path:n,value:t[n],rules:i});break;case"object":s.push({path:n,value:c(n,t),rules:i});break;case"arrayOfObject":if(T(n)!=="*")s.push({path:n,value:c(n,t),rules:i});else{let b=n.split("."),a=b[0],h=b[2],g=a in t&&t[a].length?t[a]:[{}];for(let[l,x]of Object.entries(g)){let R=x,O=`${a}.${l}.${h}`;w(O,s)||s.push({path:O,value:R[h],rules:i.replace(".*.",`.${l}.`)})}}break}}let r={};for(let n of s){let{path:i,rules:u,value:m}=n;for(let b of u.split($.ruleSeparator)){let[a,h]=b.split(":");if(!(i in r)&&a in q){let g={pass:!1};if(!a.startsWith("required")&&d(m)?g={pass:!0}:g=await q[a]({data:t,value:m,args:h}),!g.pass){let l=f.invalid,x=`${i}.${a}`,R=`${i.replace(/\.\d+\./,".*.")}.${a}`;x in f?l=f[x]:R in f?l=f[R]:a in f&&(l=f[a]),r[i]=typeof l=="string"?l:await l({attribute:_(i,F)||($.convertToReadableFieldNames?$.convertToReadableFieldNamesFunction(i):i),value:m,args:h,data:t,extra:g.extra})}}}}return{pass:Object.keys(r).length===0,errors:r,data:j(s)}}var B={validate:k,setConfig:C,setRule:P,setMessage:D,setAttribute:M,rules:p,utils:I},ae=B;export{ae as default};
